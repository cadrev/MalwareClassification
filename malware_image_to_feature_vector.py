
# coding: utf-8


import numpy as np
import os
import cv2
import pandas as pd



# Reshape the size of the malware images uniformly
size      = 32 
# name of the folder containing the malware images
directory = 'data'


data_dir = os.listdir(directory)
for i in data_dir:
    print i


features = []
labels   = []
category = []

for (index,directory) in zip(range(len(data_dir)), data_dir):
    for filename in os.listdir('data/' + directory):
        img        = cv2.imread('data/'+ directory + '/' + filename,0)
        compressed = cv2.resize(img,(size,size))
        flattened  = compressed.flatten()
        features.append(flattened)
        labels.append(index)

for numbers in labels:
    category.append(data_dir[numbers])

zip(features,labels,category)

data             = pd.DataFrame(features)
data['category'] = category
data['labels']   = labels
data.to_csv('malware_data_32.csv',sep=',')


print 'done'





