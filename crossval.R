setwd("example_dir/path/")

library(caret)
library(klaR)
library(randomForest)
# load the iris dataset
malware        <- read.table('malware_data_32.csv',sep=",",header=TRUE)
malware$labels <- as.factor(malware$labels)
# define an 80%/20% train/test split of the dataset
split=0.80
trainIndex <- createDataPartition(malware$labels, p=split, list=FALSE)
data_train <- malware[ trainIndex,]
data_test  <- malware[-trainIndex,]


# Perform Cross Validation
crossval <- rfcv(data_train[,2:1025],data_train[,1],cv.fold=2, do.trace=TRUE, ntree=100)

# print out OOB error result for number of features
print(crossval[[2]])

# get the resulting confusion matrix for the cross validation
results <- confusionMatrix(crossval[[3]][[1]],data_train[,1])
write.table(results[[2]],file="predict_crossval.csv",sep=",")








